## 3.25美团二面

1. socket服务端和客户端会用到哪些函数

2. DMA？
3. 将一个文件从磁盘发送出去CPU需要做什么
4. TIME_WAIT阶段，MSL是动态计算的还是固定值
5. SQL插入一条语句insert
6. 什么情况下索引会失效
7. 怎么样避免拥塞
8. 红黑树，B树，B+树，B+树将所有数据放在叶子节点的好处

## 0406 小米一面

1. 多线程
   多线程中栈私有，堆公有。在多线程环境下，每个线程拥有一个栈和一个程序计数器，栈和程序计数器用来保存线程的执行上下文和执行状态，是线程的私有资源。其他的资源（比如堆，地址空间、全局变量）是由同一个进程内的多个线程共享。

2. 拷贝构造函数，深拷贝与浅拷贝，什么时候深拷贝，什么时候浅拷贝？
   拷贝构造函数是在对象被创建时调用，赋值函数只能被已经存在了的对象调用。以下情况会调用拷贝构造函数：

   1. 一个对象以值传递的方式传入函数体；
   2. 一个对象以值传递的方式从函数返回；
   3. 一个对象需要通过另一个对象进行初始化。

   隐式的拷贝构造函数是浅拷贝，必须显式的提供拷贝构造函数和赋值运算符才是深拷贝。浅拷贝是多个对象共用一块资源，深拷贝每个对象共同拥有自己的资源。

3. 设计模式

4. 守护进程
   守护进程是生存期很长的一种进程，它们独立于控制终端，并且周期性地执行某种任务或等待处理某些发生的事件，多数的守护进程都伴随着 Linux 系统启动而启动，关闭而关闭。
   Linux系统启动时会启动很多系统服务进程,这些系统服务进程没有控制终端,不能直接和用户交互。其它进程都是在用户登录或运行程序时创建,在运行结束或用户注销时终止,但系统服务进程不受用户登录注销的影响,它们一直在运行着。这种进程有一个名称叫守护进程(Daemon)。例如：udevd负责维护/dev目录下的设备文件,acpid负责电源管理,syslogd负责维护/var/log下的日志文件,可以看出守护进程通常采用以d结尾的名字,表示Daemon。
   精灵进程作用：提供服务。eg:内核线程：完成操作系统级别服务.

5. 原子操作，++i是原子操作吗？
   不是原子操作。

6. DMA的详细过程
   DMA的出现就是为了解决批量数据的输入/输出问题。DMA是指外部设备不通过CPU而直接与系统内存交换数据的接口技术。这样数据的传送速度就取决于存储器和外设的工作速度。
   DMA的传送过程：

   1. 预处理：由CPU完成一些必要的准备工作。首先，CPU执行几条I/O指令，用以测试I/O设备状态，向DMA控制器的有关寄存器置初值，设置传送方向、启动该设备等。然后，CPU继续执行原来的程序，直到I/O设备准备好发送的数据(输入情况)或接受的数据(输出情况)时，I/O设备向DMA控制器发送DMA请求，再由DMA控制器向CPU发送总线请求(统称为DMA请求)，用以传输数据。
   2. 数据传送：DMA的数据传输可以以单字节(或字)为基本单位，对于以数据块为单位的传送(如银盘)，DMA占用总线后的数据输入和输出操作都是通过循环来实现。需要特别之处的是，**这一循环也是由DMA控制器(而不是通过CPU执行程序)实现的，即数据传送阶段是完全由DMA(硬件)来控制的**。
   3. 后处理：DMA控制器向CPU发送中断请求，CPU执行中断服务程序做DMA结束处理，包括检验送入主存的数据是否正确，测试传送过程中是否出错(错误则转入诊断程序)和决定是否继续使用DMA传送其他数据块等。
   
7. ARP协议

## 0411 字节一面

1. Cookie和Session，Cookie是如何作用的？
   当用户在浏览器键入URL之后，如果浏览器未查询到Cookie，则不带Cookie直接访问，服务端会为用户创建ID，并在响应报文在加入Set-cookie字段，以及ID值，浏览器在管理的Cookie文件中加入服务器的主机名和再Set-cookie首部中的识别码。在下次访问该URL时，浏览器会在请求报文中带上cookie，服务器在后端数据库中查找该ID对应的用户数据。之后的每一次浏览器访问该URL都会带上cookie。
2. HTTPS建立连接过程？
3. HTTP状态码，头部包含信息
4. 上电之后到开机的过程
5. 键盘键入按键之后的处理
6. 编译过程：预处理，编译，汇编，链接
7. （智力题）100个抽屉，第i轮，对除i余0的index的抽屉，更改开关状态，100轮之后有多少个抽屉是打开的？
   一个数n可以分解为1*n，或者a * b（对于非质数），那么一定会在第1轮打开，第k轮关闭，第a轮打开，第b轮关闭，只有在1 == n，以及a == b时，a与b是同一轮，这样的话就可以做到只打开不关闭，因此只有能够分解成n = a * a的数，最终才会是打开的，对于100以内的是1^2^~10^2^，所以是10个抽屉是打开的。
8. （算法题）一个数组，求满足“任意两个数的差小于等于limit“的连续子数组的最大长度。
   满足条件的数组是由数组内的最大最小值决定的，如果数组内的最大值减最小值小于等于limit，那么满足条件。使用双指针，将遍历的数，以及index，make_pair后分别放入大顶堆和小顶堆中，如果右侧加入了一个更大的数，那么就从小顶堆中pop数，如果数的Index小于left那么说明该数无效，直接pop，否则就pop，且更新left，直至再次满足条件为止，然后不断更新最大长度。如果右侧加入了一个更小的数，使得不满足条件，那么同样的需要去大顶堆里pop数，做类似的操作。right遍历到数组末尾时结束，返回存储的最大长度。

0414 字节二面

1. 数据库缓存，大量的查询输入时如何优化缓存避免热点信息被淘汰？
2. 粘包以及如何解决
3. 实现strcpy()与string类
4. ``write(fd,"1111");``底层实现过程

